<div class="context-wrapper">
    <div class="context-left" id="context-left-box">
      <p-listbox [style]="{'width':'100%'}" [options]="systems" (onChange)="onSelect($event)"  optionLabel="systemName">
        <p-header>
          <table style="width:100%">
              <tr>
                <td style="text-align:center">시스템 목록</td>
              </tr>
          </table>
        </p-header>
      </p-listbox>
    </div>
    <div class="context-right">
      <p-panel header="시스템 연결 정보">          
          <div class="form-input-text-box">
            <div><label>ID</label></div>
            <div><input type="text" style='width:70%' [(ngModel)]="selectedSystem.systemId" [disabled]="true" pInputText></div>
  
            <div><label>NAME</label></div>
            <div><input type="text" style='width:70%' [(ngModel)]="selectedSystem.systemName" pInputText></div>
            
            <div><label>DESCRIPTION</label></div>
            <div><input type="text" style='width:70%' [(ngModel)]="selectedSystem.systemDesc" pInputText></div>
  
            <div><label>URL</label></div>
            <div><input type="text" style='width:70%' [(ngModel)]="selectedSystem.systemUrl" pInputText></div>
            
          </div>
          <p-footer>
            <table>
                <tr>
                    <td style="text-align:center"> <p-button label="추가"  (click)="addSystem()" ></p-button> </td>
                    <td style="text-align:center"> <p-button label="변경"  (click)="editSystem()" ></p-button> </td>
                    <td style="text-align:center"> <p-button label="삭제"  (click)="removeSystem()" ></p-button> </td>
                </tr>
            </table>
          </p-footer>
      </p-panel>
  
      <app-scheduler-list-panel [system]="selectedSystem"></app-scheduler-list-panel>

      <app-schema-mapping-panel [system]="selectedSystem"></app-schema-mapping-panel>

      <app-system-info-dlg [systemData]="_systemData" (result)="onSystemEditResult($event)"></app-system-info-dlg>
    </div>
  </div>





<p-dialog header="스케줄러 상세 작업 내용" [(visible)]="displayDetailDialog" [responsive]="true" [modal]="true" [style]="{'margin-left':'80px', 'margin-right':'80px'}"  (onAfterHide)="onDialogHide()">
    <div class="ui-g" *ngIf="selectedScheduler">       
        <p-table class="text-center" [value]="detailAuditLogs" [paginator]="true" [rows]="10">
            <ng-template pTemplate="header">
                <tr>
                    <th>사용자 ID</th>
                    <th>수행 내용</th>
                    <th>원본 시스템</th>
                    <th>타겟 시스템</th>
                    <th>작업 결과</th>
                    <th>작업자/타입</th>
                    <th>실패 원인</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-audit>
                <tr>
                    <td>{{audit.resourceId}}</td>
                    <td>{{audit.method}}</td>
                    <td>{{audit.sourceSystemId}}</td>
                    <td>{{audit.targetSystemId}}</td>
                    <td>{{audit.result}}</td>
                    <td>{{audit.workerId}}/{{audit.workerType}}</td>
                    <td>{{audit.detail}}</td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <p-footer>
        <button type="button" pButton icon="pi pi-close"  label="Close" (click)="displayDetailDialog=false"></button>
    </p-footer>
</p-dialog>