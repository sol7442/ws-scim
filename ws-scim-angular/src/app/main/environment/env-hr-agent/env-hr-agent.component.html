<p-panel >
    <p-header>
        <div >
            <span class="ui-panel-title context-header-text" style="display:inline-block;margin-top:4px;font-weight:bold">
              원장 시스템 리스트
            </span>
        </div>
    </p-header>
    <div >
        <p-table class="table-cell-center" [value]="systems" [paginator]="true" [rows]="5" [responsive]="true"
          selectionMode="single" [(selection)]="selectedSystem" dataKey="systemId">
            <ng-template pTemplate="header">
                <tr>
                    <th>시스템 아이디</th>
                    <th>시스템 이름</th>
                    <th>시스템 URL</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-system>
                <tr (click)="onSelelectSystem(system)">
                    <td>{{system.systemId}}</td>
                    <td>{{system.systemName}}</td>
                    <td pEditableColumn>
                        <p-cellEditor>
                            <ng-template pTemplate="input">
                                <input type="text" [(ngModel)]="system.systemUrl" required>
                            </ng-template>
                            <ng-template pTemplate="output">
                                {{system.systemUrl}}
                            </ng-template>
                        </p-cellEditor>
                        
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
    <p-footer>
        <table>
            <tr>
                <td><button type="button" pButton label="추가" (click)="displayDetailDialog=false"></button></td>
                <td><button type="button" pButton label="삭제" (click)="displayDetailDialog=false"></button></td>
                <td><button type="button" pButton label="변경" (click)="displayDetailDialog=false"></button></td>
            </tr>
        </table>
    </p-footer>
</p-panel>
<p-panel header="환경설정"  [toggleable]="true" [collapsed]="true">
    <table>
        <tr><td>+ {{this.selectedSystem.systemName}}</td></tr>
        <tr>
            <td style="width:10%;text-align: center"><button type="button" pButton label="리스트 가져오기" (click)="getConfigList()"></button></td>            
            <td style="width:70%"><p-dropdown [options]="configFiles" [(ngModel)]="selectedConfig" editable="true" [style]="{'width':'100%'}" optionLabel="path"></p-dropdown></td>
            <td style="width:10%;text-align: center"><button type="button" pButton label="파일 가져오기" (click)="onSelectConfigFile()"></button></td>            
            <td style="width:10%;text-align: center"><p-fileUpload mode="basic" chooseLabel="패치" (onUpload)="uploadConfig($event)" (onBeforeUpload)="onBeforeConfigUpload($event)"  url="{{configUploadUrl}}" multiple="multiple"  maxFileSize="10000000"></p-fileUpload></td>
        </tr>
        <tr>
            <td colspan="4">
                    <div class="grandparent" style="width:calc(100vw - 280px); height: calc(100vh - 650px); overflow: scroll; background: gray">
                        <div class="parent" style="display: inline-block;" >
                            <pre>{{configFile}}</pre>
                        </div>
                    </div>
            </td>
        </tr>
    </table>
    
    <p-footer>
        <p-fileUpload (onUpload)="uploadLibray($event)" (onBeforeUpload)="onBeforeLibraryUpload($event)" url="{{librayUploadUrl}}" multiple="multiple"  maxFileSize="10000000"></p-fileUpload>
    </p-footer>
</p-panel>

